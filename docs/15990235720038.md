# 工厂模式

## 定义
让工厂类来创建不同的对象。

## 工厂模式的使用场景
1. 代码中存在 if-else 分支判断，动态地根据不同的类型创建不同的对象。
2. 不需要根据不同的类型创建不同的对象，但是，单个对象本身的创建过程比较复杂，比如前面提到的要组合其他类对象，做各种初始化操作。

- 在第一种情况下，当对象创建比较简单时，用简单工厂模式。
- 在第一种情况下，当对象创建比较复杂时，用工厂方法模式。
- 第二种情况，应该把对象的创建由工厂实现，用工厂方法模式。
- 当要创建的对象有两种分类方式时
    - 不需要每个对象实现一个工厂类。
    - 让一个工厂负责创建多个不同类型的对象。
    - 其实就是一种类型通过继承实现，一种类型通过接口实现。

## 三种工厂模式的区别
类型A：a，b；
类型B：c，d；
类型C：a，c；
类型D：b，d；

- 简单工厂：实现一个工厂类，工厂类中有1个创建方法，通过参数和if-else或者反射来分别创建不同的对象。
- 工厂方法：实现4个工厂类，每个工厂类实现创建每个对象。这样if-else又到了调用层，建议再用一个创建工厂的工厂类用简单工厂方式来实现，或者在外部用反射。
- 抽象工厂：实现两个工厂类，每个工厂类实现通过不同函数或者if-else实现两种对象。其中一种分类按照继承关联，另一种按照接口类关联。

## 工厂模式的作用
- 封装变化：创建逻辑有可能变化，封装成工厂类之后，创建逻辑的变更对调用者透明。
- 代码复用：创建代码抽离到独立的工厂类之后可以复用。
- 隔离复杂性：封装复杂的创建逻辑，调用者无需了解如何创建对象。
- 控制复杂度：将创建代码抽离出来，让原本的函数或类职责更单一，代码更简洁。