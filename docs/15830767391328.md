# 临时表
- 可用使用各种引擎。
    - InnoDB引擎|MyISAM引擎：数据写到磁盘上。【磁盘临时表】
    - Memory引擎：数据写到内存中。【内部临时表】

## 建表语句
create temporary table temp_t ... 

## 特性
- 一个临时表只能被创建它的 session 访问，对其他线程不可见。
- 临时表可以与普通表同名。
- 临时表和普通表重名时，show create 语句，以及增删改查语句访问的是临时表。

        每个线程都维护了自己的临时表链表。这样每次 session 内操作表的时候，先遍历链表，检查是否有这个名字的临时表，如果有就优先操作临时表，如果没有再操作普通表
- show tables 命令不显示临时表。
- 客户端异常断开，或数据库异常重启，临时表会自动回收。

        session 结束的时候，对链表里的每个临时表，执行 “DROP TEMPORARY TABLE + 表名”操作。

## 应用
1. 大表分库分区时，中间查询结果使用临时表，再进行排序、分组等操作。
2. union, group by(分组字段没有索引)。

## 文件系统
- 表结构：
    - 放在临时文件目录下，select @@tmpdir 命令，来显示实例的临时文件目录。
    - 后缀是.frm。
    - 前缀是「#sql{进程 id}_{线程 id}_ 序列号」。
- 数据：
    - <=5.6：与表结构相同前缀、以.ibd 为后缀的文件。
    - >=5.7：MySQL 引入了一个临时文件表空间，专门用来存放临时文件的数据。